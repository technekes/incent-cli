#! /usr/bin/env bash

config_path="${HOME}/.config/incent"

create_secrets() {
  echo "Addinng secrets.env"

  mkdir -p "${config_path}"

  echo "
  AUTH0_CLIENT_ID_STAGE=get from secret server
  AUTH0_CLIENT_SECRET_STAGE=get from secret server
  AUTH0_CLIENT_ID_PROD=get from secret server
  AUTH0_CLIENT_SECRET_PROD=get from secret server
  " > "${config_path}/secrets.env"
}

incent() {
  echo "Installing incent CLI"

  echo "$(curl -s https://raw.githubusercontent.com/technekes/incent-cli/master/bin/incent)" > ~/bin/incent

  chmod +x ~/bin/incent
}

config_details() {
  echo "Config details"
  incent config init
  incent config list
}

create_secrets
incent
config_details